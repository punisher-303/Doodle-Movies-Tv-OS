// Auto-applied by with-android-signing config plugin
android {
    signingConfigs {
        def keystoreProperties = new Properties()
        def keystorePropertiesFile = rootProject.file('key.properties')
        if (keystorePropertiesFile.exists()) {
            keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
            release {
                keyAlias keystoreProperties['keyAlias']
                keyPassword keystoreProperties['keyPassword']
                storeFile rootProject.file('Doodle.jks')
                storePassword keystoreProperties['storePassword']
                v1SigningEnabled true
                v2SigningEnabled true
                enableV3Signing = true
            }
        }
    }

    buildTypes {
        release {
            def keystorePropertiesFile = rootProject.file('key.properties')
            if (keystorePropertiesFile.exists()) {
                println("keystorePropertiesFile exists")
                signingConfig signingConfigs.release
            } else {
                println("keystorePropertiesFile does not exist")
                signingConfig signingConfigs.debug
            }
        }
    }
}
